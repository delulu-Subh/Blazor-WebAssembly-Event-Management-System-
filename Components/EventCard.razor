@using EventManagementSystem.Models

<div class="event-card">
    <div class="event-header">
        <h3>@Event.Name</h3>
        <span class="event-date">@Event.Date.ToString("MMM dd, yyyy")</span>
    </div>
    
    <div class="event-body">
        <div class="event-info">
            <span class="info-label">ğŸ“ Location:</span>
            <span class="info-value">@Event.Location</span>
        </div>
        
        <div class="event-info">
            <span class="info-label">ğŸ’º Available Seats:</span>
            <span class="info-value seats-available">@Event.AvailableSeats / @Event.TotalSeats</span>
        </div>
        
        <div class="event-info">
            <span class="info-label">ğŸ‘¥ Attendees:</span>
            <span class="info-value">@Event.AttendeeCount</span>
        </div>
    </div>
    
    <div class="event-footer">
        @if (Event.AvailableSeats > 0)
        {
            <button class="btn-register" @onclick="OnRegisterClicked">Register Now</button>
        }
        else
        {
            <button class="btn-full" disabled>Event Full</button>
        }
    </div>
</div>

@code {
    // Parameter binding - receives Event from parent
    [Parameter]
    public Event Event { get; set; } = null!;

    // Two-way binding: EventCallback allows parent to respond to changes
    [Parameter]
    public EventCallback<int> OnRegister { get; set; }

    private async Task OnRegisterClicked()
    {
        // Invoke the callback, passing the Event ID to parent
        await OnRegister.InvokeAsync(Event.Id);
    }
}
